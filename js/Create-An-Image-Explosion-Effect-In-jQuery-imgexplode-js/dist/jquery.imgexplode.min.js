/*
 * jquery-image-explode 1.0.14
 * A jQuery explosion plugin.
 * https://github.com/blackmiaool/jquery-image-explode#readme
 *
 * Copyright 2015, blackmiaool
 * Released under the MIT license.
*/

"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e="explode-wrapper";return t?(t.fn.explodeRestore=function(){this.each(function(){var a=t(this),o=a.prop(e);o&&(o.replaceWith(a),a.prop(e,null))})},void(t.fn.explode=function(a){function o(t){function e(){var i=Date.now(),n=i-a;st.clearRect(0,0,Z,tt),it.forEach(function(t){st.save();var e=t.width,a=t.height;st.translate(t.biasx,t.biasy),st.rotate(t.lastAngle||t.finalAngleRad),W&&(st.beginPath(),st.arc(0,0,e/2,0,2*Math.PI,!1),st.closePath(),st.clip());var i=void 0;i=n<t.time1?1:n>t.time2?0:1-(n-t.time1)/M,0!==i||t.released||(t.released=!0,o--),st.globalAlpha=i,st.drawImage(rt[0],t.left,t.top,t.width,t.height,-e/2,-a/2,e,a),st.restore()}),o?window.requestAnimationFrame(e):t&&t()}var a=Date.now(),o=it.length;it.forEach(function(t){t.time1=1e3/(t.ratio*($+1-t.width)/$+.1),t.time2=t.time1+M}),e()}function i(){setTimeout(function(){n(function(){_.explodeRestore()},!0)},P)}function n(t,e){function a(){var r=Date.now(),s=void 0,c=void 0;if(s=(r-i)/1e3,c=(r-o)/D,e&&(c=1-c),z)pt+=z*s*300;else{if(c>1||c<0)return void(t&&t());s*=Math.cos(c*Math.PI/2)*Math.PI/2}e&&(s=-s),i=r,st.clearRect(0,0,Z,tt),it.forEach(function(t){st.save();var e=t.width,a=t.height;t.land||(t.biasx+=t.vx*s,t.biasy+=(t.vy+pt)*s,z&&(L&&L(t)||t.biasy>t.transYMax||t.biasy<t.height/2)&&(n--,t.land=!0,t.lastAngle=t.finalAngleRad*c,G?t.biasy=z>0?t.transYMax:t.height/2:t.biasy=2*t.transYMax)),st.translate(t.biasx,t.biasy),t.lastAngle?st.rotate(t.lastAngle):st.rotate(t.finalAngleRad*c),W&&(st.beginPath(),st.arc(0,0,e/2,0,2*Math.PI,!1),st.closePath(),st.clip()),st.drawImage(rt[0],t.left,t.top,t.width,t.height,-e/2,-a/2,e,a),st.restore()}),z&&!n?t():window.requestAnimationFrame(a)}var o=Date.now(),i=o,n=it.length;e||it.forEach(function(t){t.vx=t.translateX/D*1e3,t.vy=t.translateY/D*1e3,t.biasx=t.translateX0,t.biasy=t.translateY0,z&&(t.transYMax=tt/2+j-t.height/2)}),a()}function r(t,e){return parseInt(Math.random()*(e+1-t),10)+t}function s(){it.forEach(function(t,e){var a=(Math.random()*S*2-S)/((Math.random()+2)*t.width)*10,o=t.left+t.width/2-U/2,i=t.top+t.width/2-J/2;0===o&&(o=e%2?-1:1),0===i&&(i=e%4<2?-1:1);var n=Math.sqrt(o*o+i*i),r=((1-ot)*(1-(t.width-f)/($-f))+ot)*Math.random();r=1-(1-r)*(1-b/v);var s=(v-n)*r+n,c=n*n,d={finalDistance:s,ratio:r,x:o,y:i,distance:n,translateX:(s-n)*Math.sqrt((c-i*i)/c)*(o>0?1:-1),translateY:(s-n)*Math.sqrt((c-o*o)/c)*(i>0?1:-1),translateX0:(Z-U)/2+t.left+t.width/2,translateY0:(tt-J)/2+t.top+t.height/2,finalAngle:a,finalAngleRad:a*(Math.PI/180)};for(var l in d)t[l]=d[l]})}function c(){function t(t,e){return!(t<V[0]&&e>J-V[0]||t>U-V[1]&&e>J-V[1]||t>U-V[2]&&e<V[2]||t<V[3]&&e<V[3])}function e(t,e,a,o,i){return(t-a)*(t-a)+(e-o)*(e-o)<i*i}function a(a){var o=a.left,i=a.top,r=a.width,d=a.height,l=o+r/2,h=J-i-d/2;(c||t(l,h)||V.some(function(t,a){return e(l,h,n[a][0]*U+2*(.5-n[a][0])*t,n[a][1]*J+2*(.5-n[a][1])*t,t)}))&&s.push({left:o,top:i,width:r,height:d})}function o(t){function e(t){var e=o;if(o+=t,a({left:e,top:i,width:t,height:t}),Y)for(var n=1;n<parseInt($/t);n++)a({left:e,top:i+n*t,width:t,height:t})}var o=0,i=t*$,n=void 0;do n&&e(n),n=r(f,$);while(U>o+n);U-o>=f&&e(U-o)}var i=void 0,n=[[0,1],[1,1],[1,0],[0,0]];i=p?Math.floor(J/$):Math.ceil(J/$);for(var s=[],c=V.every(function(t){return 0===t}),d=0;d<i;d++)o(d);return s.sort(function(t,e){return Math.random()>.5?1:-1}),s}function d(){var t=["border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius"],e=_.width();return t=t.map(function(t){var a=_.css(t);return a.match(/px$/)?1*a.match(/^\d+/)[0]:a.match(/%$/)?a.match(/^\d+/)[0]/100*e:a}),t=t.map(function(t){return t>e/2&&(t=e/2),t})}a&&"object"===("undefined"==typeof a?"undefined":_typeof(a))||(a={});var l=a,h=l.minWidth,f=void 0===h?3:h,u=l.omitLastLine,p=void 0!==u&&u,g=l.radius,v=void 0===g?80:g,m=l.minRadius,b=void 0===m?0:m,y=l.release,w=void 0===y||y,x=l.fadeTime,M=void 0===x?300:x,k=l.recycle,I=void 0===k||k,A=l.recycleDelay,P=void 0===A?500:A,R=l.fill,Y=void 0===R||R,C=l.explodeTime,D=void 0===C?300:C,E=l.maxAngle,S=void 0===E?360:E,q=l.gravity,z=void 0===q?0:q,T=l.round,W=void 0!==T&&T,X=l.groundDistance,j=void 0===X?400:X,F=(l.ignoreCompelete,l.land),G=void 0===F||F,L=l.checkOutBound,N=l.finish,Q=a,$=Q.maxWidth,_=this,B=void 0,H=arguments;if(_.length>1)return void _.each(function(){var e=t(this);e.explode.apply(e,H)});if(_.length){if("IMG"===_.prop("tagName")){if(!_.prop("complete"))return void _.on("load",function(){_.explode.apply(_,H)});B=_}else if("none"!==_.css("backgroundImage")){var O=_.css("backgroundImage").match(/url\(\"([\S\s]*)\"\)/)[1];if(B=t("<img/>",{src:O}),!a.ignoreCompelete)return void B.on("load",function(){a.ignoreCompelete=!0,_.explode.apply(_,[a])})}var U=_.width(),J=_.height(),K=Math.min(U,J),V=d(),Z=Math.max(U,2*v),tt=Math.max(J,2*v,2*j);$||($=K/4);var et=t("<div></div>",{class:e}),at=["width","height","margin-top","margin-right","margin-bottom","margin-left","position","top","right","bottom","left","float","display"];at.forEach(function(t){et.css(t,_.css(t))}),"static"===et.css("position")&&et.css("position","relative");var ot=.3,it=c();s();var nt=t("<canvas></canvas>"),rt=t("<canvas></canvas>");rt.css({width:U,height:J}),rt.attr({width:U,height:J}),nt.css({position:"absolute",left:(U-Z)/2,right:(U-Z)/2,top:(J-tt)/2,bottom:(J-tt)/2,margin:"auto",width:Z,height:tt}),nt.attr({width:Z,height:tt}),et.append(nt);var st=nt[0].getContext("2d"),ct=rt[0].getContext("2d"),dt=B?B[0]:{},lt=dt.naturalWidth,ht=dt.naturalHeight;if("IMG"===_.prop("tagName"))ct.drawImage(B[0],0,0,lt,ht,0,0,U,J);else if("none"!==_.css("backgroundImage")){var ft,ut;!function(){var t=function(t){console.warn("Unsupported "+t+" style:"+n[t])},e=0,a=0,o=lt,i=ht,n={"background-repeat":_.css("background-repeat"),"background-size":_.css("background-size"),"background-position-x":_.css("background-position-x"),"background-position-y":_.css("background-position-y")},r=U/lt,s=J/ht;if("cover"===n["background-size"]){var c=Math.max(r,s);o=lt*c,i=ht*c}else if("contain"===n["background-size"]){var d=Math.min(r,s);o=lt*d,i=ht*d}else t("background-size");if(e=parseInt(n["background-position-x"])/100*(U-o),a=parseInt(n["background-position-y"])/100*(J-i),"repeat"===n["background-repeat"])for(ft=0-Math.ceil(e/o);ft<U/o+Math.ceil(-e/o);ft++)for(ut=0-Math.ceil(a/i);ut<J/i+Math.ceil(-a/i);ut++)ct.drawImage(B[0],0,0,lt,ht,e+ft*o,a+ut*i,o,i);else"no-repeat"===n["background-repeat"]?ct.drawImage(B[0],0,0,lt,ht,e,a,o,i):t("background-repeat")}()}else"rgba(0, 0, 0, 0)"!==_.css("backgroundColor")?(ct.fillStyle=_.css("backgroundColor"),ct.fillRect(0,0,U,J)):console.warn("There's nothing to explode.");it.forEach(function(t){var e=t.left,a=t.top,o=t.width,i=t.height;t.naturalParams=[e,a,o,i]}),_.after(et),_.prop(e,et),_.detach();var pt=0;n(function(){w?o():I?i():N&&N()})}})):void console.error("jQuery is needed.")}(window.jQuery);